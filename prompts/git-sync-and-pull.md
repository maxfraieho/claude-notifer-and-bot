# Промпт: Git синхронізація та pull

## Опис процесу
Цей промпт автоматизує процес синхронізації локального репозиторію з віддаленим, включаючи безпечне виконання git pull з перевіркою конфліктів та відновлення після збою.

## Діалог з Claude Code

**Користувач:**
```
git-sync
```

**Claude Code відповідає:**
Я виконаю синхронізацію репозиторію з віддаленим сервером. Процес включає:

1. Перевірка поточного стану репозиторію
2. Збереження локальних змін при необхідності
3. Отримання оновлень з віддаленого репозиторію
4. Вирішення конфліктів при їх наявності
5. Відновлення локальних змін

Почнемо синхронізацію:

*Виконує послідовність команд:*

```bash
# 1. Перевірка поточного стану
git status

# 2. Перевірка віддаленого репозиторію
git remote -v

# 3. Отримання інформації про віддалені зміни без pull
git fetch origin

# 4. Порівняння локальної та віддаленої гілки
git log HEAD..origin/main --oneline

# 5. Перевірка наявності локальних незакомічених змін
git diff --quiet || echo "Локальні зміни знайдено"
```

**Сценарій 1: Чисте робоче дерево (немає локальних змін)**
```bash
# Простий pull
git pull origin main

# Перевірка результату
git status
git log --oneline -5
```

**Сценарій 2: Є локальні незакомічені зміни**
```bash
# Збереження локальних змін
git stash push -m "Auto-stash before sync $(date)"

# Виконання pull
git pull origin main

# Відновлення локальних змін
git stash pop
```

**Сценарій 3: Конфлікти при stash pop**
```bash
# Показати конфлікти
git status

# Надати рекомендації щодо вирішення
echo "Знайдено конфлікти в файлах:"
git diff --name-only --diff-filter=U
```

Чи хочете, щоб я допоміг вирішити конфлікти автоматично або вручну?

**Результат:**
- ✅ Репозиторій синхронізовано з віддаленим сервером
- ✅ Локальні зміни збережено та відновлено
- ⚠️ [При наявності] Конфлікти потребують ручного вирішення

## Варіанти запуску

**Синхронізація з автоматичним вирішенням конфліктів:**
```
git-sync-auto
```

**Синхронізація конкретної гілки:**
```
git-sync develop
```

**Синхронізація з форсованим оновленням (обережно!):**
```
git-sync-force
```

**Тільки перевірка оновлень без pull:**
```
git-check-updates
```

## Claude Code відповідає на варіанти:

### git-sync-auto:
```bash
# Автоматичне прийняття incoming змін при конфліктах
git pull -X theirs origin main

# або автоматичне прийняття локальних змін
git pull -X ours origin main
```

### git-sync develop:
```bash
# Переключення на гілку develop
git checkout develop

# Синхронізація
git pull origin develop
```

### git-sync-force:
```bash
# ОБЕРЕЖНО: Перезаписує локальні зміни
git fetch origin
git reset --hard origin/main
```

### git-check-updates:
```bash
# Тільки перевірка без застосування змін
git fetch origin
git log HEAD..origin/main --oneline --stat
```

## Безпечний діалог при конфліктах

**Claude Code:**
Знайдено конфлікти в наступних файлах:
- `src/config/settings.py` (merge conflict)
- `README.md` (merge conflict)

Варіанти вирішення:
1. `resolve-manual` - я допоможу вирішити кожен конфлікт інтерактивно
2. `resolve-theirs` - прийняти віддалені зміни
3. `resolve-ours` - зберегти локальні зміни  
4. `resolve-mixed` - вибрати стратегію для кожного файлу окремо

**Користувач обирає стратегію, Claude виконує відповідні дії**

## Коли використовувати
- Перед початком роботи з кодом
- Після тривалої перерви в розробці
- Перед створенням Pull Request
- При повідомленнях про конфлікти версій
- Для регулярної синхронізації в командній роботі

## Безпечні практики
- Завжди створює backup через git stash
- Перевіряє стан перед виконанням операцій
- Надає опції відкату при проблемах  
- Попереджає про потенційно небезпечні операції
- Зберігає історію всіх операцій в git log