#!/bin/bash

# –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–ª—è CI/CD
# –ë–ª–æ–∫—É—î merge —è–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó

set -e

echo "üîç –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ–π–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ CI/CD..."

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —î Python
if ! command -v python3 &> /dev/null; then
    echo "‚ùå Python3 –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
    exit 1
fi

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —à–≤–∏–¥–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É
echo "üöÄ –ó–∞–ø—É—Å–∫ —à–≤–∏–¥–∫–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó..."
python3 tests/quick_localization_check.py

exit_code=$?

if [ $exit_code -eq 0 ]; then
    echo "‚úÖ –ü–†–û–ô–î–ï–ù–û: –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ–π–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É—Å–ø—ñ—à–Ω–∞"
    echo "üéâ Merge –¥–æ–∑–≤–æ–ª–µ–Ω–æ!"
    exit 0
else
    echo "‚ùå –ù–ï –ü–†–û–ô–î–ï–ù–û: –ó–Ω–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º–∏ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó"
    echo "üö´ Merge –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ!"
    echo ""
    echo "üí° –î–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:"
    echo "1. –ó–∞–º—ñ–Ω—ñ—Ç—å hardcoded UI strings –Ω–∞ await t() –≤–∏–∫–ª–∏–∫–∏"
    echo "2. –î–æ–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫–ª—é—á—ñ –¥–æ uk.json —Ç–∞ en.json"
    echo "3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å 'python3 tests/quick_localization_check.py' –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏"
    exit 1
fi